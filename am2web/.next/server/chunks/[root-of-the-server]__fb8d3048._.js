module.exports = {

"[project]/.next-internal/server/app/api/parse-xml/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/string_decoder [external] (string_decoder, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/timers [external] (timers, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("timers", () => require("timers"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/tty [external] (tty, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[project]/src/app/utils/logging.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/winston/lib/winston.js [app-route] (ecmascript)");
;
const logger = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createLogger"])({
    level: 'info',
    format: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["format"].combine(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["format"].timestamp(), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["format"].simple()),
    transports: [
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$winston$2f$lib$2f$winston$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["transports"].Console()
    ]
});
const __TURBOPACK__default__export__ = logger;
}}),
"[project]/src/app/api/parse-xml/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xml2js$2f$lib$2f$xml2js$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/xml2js/lib/xml2js.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/app/utils/logging.ts [app-route] (ecmascript)");
;
;
;
function parseSongs(parsed) {
    try {
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info("[INFO] - Starting parseSongs");
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - parsed object keys: ${Object.keys(parsed)}`);
        if (!parsed.plist) {
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error("[ERROR] - 'plist' key missing in parsed object");
            return [];
        }
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - parsed.plist keys: ${Object.keys(parsed.plist)}`);
        if (!parsed.plist.dict) {
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error("[ERROR] - 'dict' key missing in parsed.plist");
            return [];
        }
        const dictObj = parsed.plist.dict;
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[VERBOSE] - parsed.plist.dict: ${JSON.stringify(dictObj, null, 2)}`);
        // Find the index of "Tracks" in the key array
        const tracksKeyIndex = dictObj.key?.findIndex((k)=>k === "Tracks");
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - tracksKeyIndex: ${tracksKeyIndex}`);
        if (tracksKeyIndex === -1 || !dictObj.dict || !dictObj.dict[tracksKeyIndex]) {
            __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error("[ERROR] - 'Tracks' key not found or no corresponding dict value");
            return [];
        }
        // The actual tracks dictionary
        const tracksDict = dictObj.dict[tracksKeyIndex];
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - tracksDict keys: ${Object.keys(tracksDict)}`);
        for(const trackId in tracksDict){
            const trackData = tracksDict[trackId];
            if (!trackData || !trackData.key) {
                __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error(`[ERROR] - Track ${trackId} missing 'key' property`);
                continue;
            }
            const keys = trackData.key;
            let title = undefined;
            for(let i = 0; i < keys.length; i++){
                if (keys[i] === "Name") {
                    if (trackData.string && trackData.string[i] !== undefined) {
                        title = trackData.string[i];
                    }
                    break;
                }
            }
            if (title) {
                __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[INFO] - Track ${trackId} title: ${title}`);
            } else {
                __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error(`[ERROR] - Track ${trackId} has no title`);
            }
        }
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[INFO] - Finished parsing all tracks.`);
        return [];
    } catch (err) {
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error("[ERROR] - Exception in parseSongs", err);
        return [];
    }
}
__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info("[INFO] - XML parsing module initialized");
async function POST(req) {
    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info("[INFO] - Received POST request");
    const xml = await req.text();
    __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - Received XML length: ${xml.length}`);
    try {
        const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xml2js$2f$lib$2f$xml2js$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parseStringPromise"])(xml, {
            explicitArray: false
        });
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info("[INFO] - XML parsed successfully");
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[DEBUG] - Top-level parsed keys: ${Object.keys(result)}`);
        const songs = parseSongs(result);
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].info(`[INFO] - Returning response with ${songs.length} songs`);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(songs);
    } catch (error) {
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$app$2f$utils$2f$logging$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].error("[ERROR] - Failed to parse XML", error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: "Failed to parse XML",
            details: error
        }, {
            status: 400
        });
    }
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__fb8d3048._.js.map